{{define "article-head"}}
<meta name="description" content="{{.Summary}}" />

<meta property="og:type" content="website" />
<meta property="og:url" content="{{ .Permalink }}" />
<meta property="og:title" content="Joshua Britz | {{.Title}}" />
<meta property="og:description" content="{{.Summary}}" />

<link type="text/css" rel="stylesheet" href="css/article.css" />

{{if .Params.headerUrl}}
<meta property="og:image" content="{{ .Site.BaseURL }}{{.Params.headerUrl}}" />
{{end}}

<meta property="twitter:card" content="summary_large_image" />
<meta property="twitter:url" content="{{ .Permalink }}" />
<meta property="twitter:title" content="Joshua Britz | {{.Title}}" />
<meta property="twitter:description" content="{{.Summary}}" />

{{if .Params.headerUrl}}
<meta
  property="twitter:image"
  content="{{ .Site.BaseURL }}{{.Params.headerUrl}}"
/>
{{end}} {{end}} {{ define "main" }} {{ if .Params.headerUrl }}
<figure class="cover-image-wrapper">
  <img src="{{ .Params.headerUrl }}" alt="{{ .Title }} Cover" />
</figure>
{{ end }}

<header class="article-header">
  <h1>{{ .Title }}</h1>
  <h5>
    Published on <strong>{{ .Date.Format "January 2, 2006" }}</strong> by Joshua
    Britz
  </h5>
</header>
<article class="article-wrapper">
  {{- .Content -}}

  <div class="back-to-listing">
    <a class="button invert" role="button" hidden id="share-button">
      Share This Article
    </a>

    <a class="button" role="button" href="/">Return to the Main Page</a>
  </div>
</article>

<script async type="text/javascript">
  const button = document.getElementById("share-button");

  if (
    navigator.canShare &&
    navigator.canShare({
      url: window.location.toString(),
      title: document.title.replace("Joshua Britz | ", ""),
    })
  ) {
    button.removeAttribute("hidden");
    button.addEventListener("click", () => {
      navigator
        .share({
          url: window.location.toString(),
          title: document.title.replace("Joshua Britz | ", ""),
        })
        .then(() => console.log("Share was successful."))
        .catch((error) => console.log("Sharing failed", error));
    });
  } else {
    console.log({
      url: window.location.toString(),
      title: document.title.replace("Joshua Britz | ", ""),
    });
  }
</script>
{{end}}
